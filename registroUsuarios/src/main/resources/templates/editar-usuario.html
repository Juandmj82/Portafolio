<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Editar Usuario</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/estilos.css}">
</head>
<body>
<h1>Editar Usuario</h1>
<form th:action="@{/editar-usuario/{id}(id=${usuario.id})}" th:object="${usuario}" method="post" class="grid-form">
    <div class="form-group">
        <label for="primerNombre">Primer Nombre</label>
        <input type="text" id="primerNombre" th:field="*{primerNombre}" required>
        <div th:if="${#fields.hasErrors('primerNombre')}" th:errors="*{primerNombre}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="segundoNombre">Segundo Nombre</label>
        <input type="text" id="segundoNombre" th:field="*{segundoNombre}" required>
        <div th:if="${#fields.hasErrors('segundoNombre')}" th:errors="*{segundoNombre}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="apellidos">Apellidos</label>
        <input type="text" id="apellidos" th:field="*{apellidos}" required>
        <div th:if="${#fields.hasErrors('apellidos')}" th:errors="*{apellidos}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="genero">Género</label>
        <select id="genero" th:field="*{genero}" required>
            <option value="MASCULINO">MASCULINO</option>
            <option value="FEMENINO">FEMENINO</option>
            <option value="OTRO">OTRO</option>
        </select>
    </div>
    <div class="form-group">
        <label for="nacionalidad">Nacionalidad</label>
        <input type="text" id="nacionalidad" th:field="*{nacionalidad}" required>
        <div th:if="${#fields.hasErrors('nacionalidad')}" th:errors="*{nacionalidad}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="fechaNacimiento">Fecha de Nacimiento</label>
        <input type="date" id="fechaNacimiento" th:field="*{fechaNacimiento}" required>
        <div th:if="${#fields.hasErrors('fechaNacimiento')}" th:errors="*{fechaNacimiento}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="correo">Correo</label>
        <input type="email" id="correo" th:field="*{correo}" required>
        <div th:if="${#fields.hasErrors('correo')}" th:errors="*{correo}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="contrasena">Contraseña</label>
        <input type="password" id="contrasena" th:field="*{contrasena}" required>
        <div th:if="${#fields.hasErrors('contrasena')}" th:errors="*{contrasena}" class="errors-message"></div>
    </div>
    <div class="form-group">
        <label for="confirmarContrasena">Confirmar Contraseña</label>
        <input type="password" id="confirmarContrasena" name="confirmarContrasena" required>
        <div class="errors-message" id="errorConfirmacion" th:text="${errorContrasena}"></div>
    </div>

    <div class="button-container">
        <button type="submit" class="update-button">Actualizar</button>
    </div>
</form>
<!-- Vincula la librería SweetAlert2 desde un CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Vincula tu archivo JavaScript personalizado usando Thymeleaf -->
<script th:src="@{/js/alertas.js}"></script>

<!-- Bloque JavaScript para manejar alertas -->
<script th:inline="javascript">
    console.log("Iniciando script...");
    var actualizacionExitosa = /*[[${actualizacionExitosa}]]*/ false;
    console.log("Valor de actualizacionExitosa:", actualizacionExitosa); // Mensaje de depuración

    if (actualizacionExitosa) {
        console.log("Mostrando alerta de éxito...");
        RegistroAlertas.actualizacionExitosa(); // Llama a la función desde el espacio de nombres
    } else {
        console.log("No se cumplió la condición para mostrar la alerta.");
    }
</script>
<div th:replace="~{fragments/footer :: div}"></div>
</body>
</html>